import{j as e}from"./ui-vendor-DFluZlcK.js";import{u as g,C as c,b as d,c as i,a as m}from"./index-DP7Sjfbn.js";import{t as x,n as f,e as b,M as v}from"./icon-vendor-BiN7dS6p.js";import{R as C,P as y,d as w,b as R,T as O}from"./chart-vendor-t5epH8ff.js";import"./react-vendor-7S4FQL_3.js";import"./query-vendor-M5hTytP1.js";import"./util-vendor-B2rm_Apj.js";function U(){const{consumerProfilingData:t,isLoading:h}=g();if(h)return e.jsxs(c,{className:"h-full",children:[e.jsx(d,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5"}),"Consumer Profiling"]})}),e.jsx(m,{children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})]});const j=t==null?void 0:t.reduce((s,a)=>(s[a.gender]=(s[a.gender]||0)+1,s),{}),r=Object.entries(j||{}).map(([s,a])=>({name:s,value:a,percentage:(a/((t==null?void 0:t.length)||1)*100).toFixed(1)})),n={"18-24":0,"25-34":0,"35-44":0,"45-54":0,"55+":0};t==null||t.forEach(s=>{s.age<25?n["18-24"]++:s.age<35?n["25-34"]++:s.age<45?n["35-44"]++:s.age<55?n["45-54"]++:n["55+"]++});const o=Object.entries(n).map(([s,a])=>({name:s,value:a,percentage:(a/((t==null?void 0:t.length)||1)*100).toFixed(1)})),p=t==null?void 0:t.reduce((s,a)=>(s[a.location]=(s[a.location]||0)+1,s),{}),u=Object.entries(p||{}).sort(([,s],[,a])=>a-s).slice(0,5),l=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"];return e.jsxs(c,{className:"h-full",children:[e.jsx(d,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5"}),"Consumer Profiling"]})}),e.jsxs(m,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"}),"Gender Distribution"]}),e.jsx("div",{className:"h-32",children:e.jsx(C,{width:"100%",height:"100%",children:e.jsxs(y,{children:[e.jsx(w,{data:r,cx:"50%",cy:"50%",innerRadius:20,outerRadius:40,paddingAngle:2,dataKey:"value",children:r.map((s,a)=>e.jsx(R,{fill:l[a%l.length]},`cell-${a}`))}),e.jsx(O,{})]})})}),e.jsx("div",{className:"flex justify-center gap-4 mt-2",children:r.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l[a%l.length]}}),e.jsxs("span",{className:"text-xs",children:[s.name,": ",s.percentage,"%"]})]},s.name))})]}),e.jsxs("div",{className:"pt-3 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[e.jsx(b,{className:"h-4 w-4"}),"Age Groups"]}),e.jsx("div",{className:"space-y-1",children:o.map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:s.name}),e.jsxs("span",{className:"font-medium",children:[s.percentage,"%"]})]},s.name))})]}),e.jsxs("div",{className:"pt-3 border-t",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4"}),"Top Locations"]}),e.jsx("div",{className:"space-y-1",children:u.map(([s,a],N)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[N+1,". ",s]}),e.jsxs("span",{className:"font-medium",children:[a," consumers"]})]},s))})]})]})]})}export{U as default};
