import{j as e}from"./ui-vendor-DFluZlcK.js";import{u as $,C as i,a as n,S as f,b as g,c as N,D as b,d as w,B as y,e as v,f as d}from"./index-DP7Sjfbn.js";import{E as C,D as S,m as k,T as I}from"./icon-vendor-BiN7dS6p.js";import{R as M,P as R,d as A,b as F,T as L,B as K,C as V,X as q,Y as G,a as O}from"./chart-vendor-t5epH8ff.js";import"./react-vendor-7S4FQL_3.js";import"./query-vendor-M5hTytP1.js";import"./util-vendor-B2rm_Apj.js";function Z(){var x;const{categoryData:r,brandData:t,isLoading:B}=$();if(B)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsx(f,{className:"h-80 w-full"})})}),e.jsx(i,{children:e.jsx(n,{className:"p-6",children:e.jsx(f,{className:"h-80 w-full"})})})]});const l={primary:"#3b82f6",secondary:"#f59e0b",tertiary:"#10b981",quaternary:"#ef4444",others:["#8b5cf6","#ec4899","#f97316","#84cc16"]},o=[l.primary,l.secondary,l.tertiary,l.quaternary,...l.others],T=r==null?void 0:r.some(s=>s.percentage>40),c=s=>{console.log(`Exporting as ${s}`)},z=({active:s,payload:a})=>s&&a&&a[0]?e.jsxs("div",{className:"bg-white p-3 rounded shadow-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium",children:a[0].name||a[0].payload.category}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Value: ",a[0].value,"%"]})]}):null,P=({cx:s,cy:a,midAngle:m,innerRadius:h,outerRadius:E,percent:u})=>{const j=h+(E-h)*.5,p=s+j*Math.cos(-m*Math.PI/180),D=a+j*Math.sin(-m*Math.PI/180);return u<.05?null:e.jsx("text",{x:p,y:D,fill:"white",textAnchor:p>s?"start":"end",dominantBaseline:"central",className:"text-xs font-medium",children:`${(u*100).toFixed(0)}%`})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i,{className:"shadow-sm border border-gray-200 relative",children:[T&&e.jsx("div",{className:"absolute top-4 right-14 z-10",children:e.jsxs("div",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-purple-500"})]})}),e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs("div",{children:[e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:["Category Mix",e.jsx("span",{className:"text-xs font-normal text-muted-foreground bg-purple-50 text-purple-600 px-2 py-1 rounded",children:"Distribution"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Product category breakdown by sales volume"})]}),e.jsxs(b,{children:[e.jsx(w,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"sm",children:e.jsx(C,{className:"w-5 h-5"})})}),e.jsxs(v,{align:"end",children:[e.jsxs(d,{onClick:()=>c("csv"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Export as CSV"]}),e.jsxs(d,{children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Share Insight"]})]})]})]}),e.jsxs(n,{children:[e.jsx("div",{className:"h-80",children:e.jsx(M,{width:"100%",height:"100%",children:e.jsxs(R,{children:[e.jsx(A,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:P,outerRadius:100,fill:"#8884d8",dataKey:"value",animationBegin:0,animationDuration:800,children:r==null?void 0:r.map((s,a)=>e.jsx(F,{fill:o[a%o.length]},`cell-${a}`))}),e.jsx(L,{content:e.jsx(z,{})})]})})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:r==null?void 0:r.slice(0,4).map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:o[a]}}),e.jsxs("span",{className:"text-muted-foreground",children:[s.category,":"]}),e.jsxs("span",{className:"font-medium",children:[s.percentage,"%"]})]},s.category))})]})]}),e.jsxs(i,{className:"shadow-sm border border-gray-200 relative",children:[t&&((x=t[0])==null?void 0:x.growth)>10&&e.jsx("div",{className:"absolute top-4 right-14 z-10",children:e.jsxs("div",{className:"bg-green-50 text-green-600 px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),"Top Growth"]})}),e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsxs("div",{children:[e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:["Top Brands Performance",e.jsx("span",{className:"text-xs font-normal text-muted-foreground bg-blue-50 text-blue-600 px-2 py-1 rounded",children:"By Sales"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leading brands by peso value"})]}),e.jsxs(b,{children:[e.jsx(w,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"sm",children:e.jsx(C,{className:"w-5 h-5"})})}),e.jsxs(v,{align:"end",children:[e.jsxs(d,{onClick:()=>c("csv"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Export as CSV"]}),e.jsxs(d,{children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Share Insight"]})]})]})]}),e.jsxs(n,{children:[e.jsx("div",{className:"h-80",children:e.jsx(M,{width:"100%",height:"100%",children:e.jsxs(K,{data:t==null?void 0:t.slice(0,8),children:[e.jsx(V,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(q,{dataKey:"brand",axisLine:!1,tickLine:!1,tick:{fontSize:11,fill:"#666"},interval:0,angle:-45,textAnchor:"end",height:60}),e.jsx(G,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#666"},tickFormatter:s=>`₱${(s/1e6).toFixed(1)}M`}),e.jsx(L,{formatter:s=>[`₱${s.toLocaleString()}`,"Sales"],labelStyle:{fontSize:12}}),e.jsx(O,{dataKey:"sales",fill:"#3b82f6",radius:[8,8,0,0],animationDuration:1e3})]})})}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-4 pt-4 border-t",children:t==null?void 0:t.slice(0,4).map((s,a)=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:s.brand}),e.jsxs("p",{className:`text-sm font-medium ${s.growth>0?"text-green-600":"text-red-600"}`,children:[s.growth>0?"+":"",s.growth,"%"]})]},s.brand))})]})]})]})}export{Z as default};
