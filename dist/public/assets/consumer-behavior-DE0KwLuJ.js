import{j as e}from"./ui-vendor-DFluZlcK.js";import{r as j}from"./react-vendor-7S4FQL_3.js";import{u as y,C as N,b,c as S,g as m,a as v}from"./index-3kicyIA1.js";import{c as B,a as z,P as h}from"./data-calculations-DwmbDPiL.js";import{c as i}from"./format-utils-bn6WP3J2.js";import{n as w,o as P,p as A,q as C,T as M,r as T,s as q}from"./icon-vendor-BiN7dS6p.js";import"./query-vendor-M5hTytP1.js";import"./util-vendor-B2rm_Apj.js";function V(){var l,o,c,d,x,p;const{dashboardData:a,isLoading:u}=y(),n=j.useMemo(()=>{if(!a)return null;const t=a.transaction_trends||[],r=a.consumer_profiling||[],g=B(t),f=z(t,r);return{metrics:g,behavior:f}},[a]),s=n?{requestMethods:n.behavior.requestMethods.length>0?n.behavior.requestMethods:[{method:"Pointing",percentage:65,count:3250},{method:"Verbal",percentage:35,count:1750}],storeAcceptance:{accepted:((l=n.metrics)==null?void 0:l.storeInfluence.successRate)||78,rejected:100-(((o=n.metrics)==null?void 0:o.storeInfluence.successRate)||78),influenced:((c=n.metrics)==null?void 0:c.storeInfluence.totalInfluenced)||456,total:((d=a==null?void 0:a.transaction_trends)==null?void 0:d.length)||584},substitutionPatterns:{rate:((x=n.metrics)==null?void 0:x.substitutionRate)||15.8,topSubstitutions:((p=n.metrics)==null?void 0:p.topSubstitutions)||[{from:"Brand A",to:"Brand B",count:45},{from:"Brand C",to:"Brand D",count:38}]},preferences:n.behavior.preferences}:{requestMethods:[{method:"Pointing",percentage:65,count:3250},{method:"Verbal",percentage:35,count:1750}],storeAcceptance:{accepted:78,influenced:456,total:584},substitutionPatterns:{rate:15.8,topSubstitutions:[{from:"Brand A",to:"Brand B",count:45},{from:"Brand C",to:"Brand D",count:38}]},preferences:[{signal:"Brand Loyalty",strength:85,trend:"+2%"},{signal:"Price Sensitivity",strength:72,trend:"-1%"},{signal:"Quality Focus",strength:68,trend:"+3%"},{signal:"Convenience",strength:45,trend:"0%"}]};return e.jsxs(N,{className:"h-full",children:[e.jsx(b,{style:{padding:"16px 20px",paddingBottom:"12px"},children:e.jsxs(S,{className:"flex items-center justify-between",style:{fontSize:"16px"},children:[e.jsxs("span",{className:"flex items-center",style:{gap:"8px"},children:[e.jsx(w,{style:{width:"20px",height:"20px"}}),"Consumer Behavior & Preferences"]}),e.jsxs(m,{variant:"outline",className:"font-normal",style:{fontSize:"11px"},children:[e.jsx(P,{className:"mr-1",style:{width:"12px",height:"12px"}}),u?"Loading...":"Live Data"]})]})}),e.jsxs(v,{style:{padding:"16px 20px",paddingTop:"8px",height:"calc(100% - 52px)",overflowY:"auto"},children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("h4",{className:"font-medium flex items-center",style:{fontSize:"13px",marginBottom:"8px",gap:"4px"},children:[e.jsx(A,{style:{width:"14px",height:"14px"}}),"Store Attendant Influence"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg",style:{padding:"12px"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700",style:{fontSize:"11px"},children:"Influenced Sales"}),e.jsx(C,{className:"text-green-600",style:{width:"16px",height:"16px"}})]}),e.jsx("p",{className:"font-bold text-green-700",style:{fontSize:"20px",marginTop:"4px"},children:s.storeAcceptance.influenced.toLocaleString()}),e.jsxs("p",{className:"text-green-600",style:{fontSize:"10px"},children:[i(s.storeAcceptance.influenced/s.storeAcceptance.total*100),"% of total"]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg",style:{padding:"12px"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",style:{fontSize:"11px"},children:"Success Rate"}),e.jsx(M,{className:"text-blue-600",style:{width:"16px",height:"16px"}})]}),e.jsxs("p",{className:"font-bold text-blue-700",style:{fontSize:"20px",marginTop:"4px"},children:[i(s.storeAcceptance.accepted,0),"%"]}),e.jsx("p",{className:"text-blue-600",style:{fontSize:"10px"},children:s.storeAcceptance.accepted>75?"Above average":"Below average"})]})]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("h4",{className:"font-medium",style:{fontSize:"13px",marginBottom:"8px"},children:"Request Methods"}),e.jsx("div",{style:{display:"flex",gap:"12px"},children:s.requestMethods.map(t=>e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:"4px"},children:[e.jsxs("span",{className:"flex items-center",style:{fontSize:"11px",gap:"4px"},children:[t.method==="Pointing"?e.jsx(T,{style:{width:"12px",height:"12px"}}):e.jsx(q,{style:{width:"12px",height:"12px"}}),t.method]}),e.jsxs("span",{className:"font-medium",style:{fontSize:"12px"},children:[i(t.percentage,0),"%"]})]}),e.jsx(h,{value:t.percentage,style:{height:"6px"}}),e.jsxs("p",{className:"text-muted-foreground",style:{fontSize:"10px",marginTop:"2px"},children:[t.count.toLocaleString()," requests"]})]},t.method))})]}),e.jsxs("div",{className:"border-t",style:{paddingTop:"12px",marginBottom:"16px"},children:[e.jsx("h4",{className:"font-medium",style:{fontSize:"13px",marginBottom:"8px"},children:"Substitution Patterns"}),e.jsx("div",{className:"bg-orange-50 rounded-lg",style:{padding:"12px",marginBottom:"8px"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-orange-700",style:{fontSize:"11px"},children:"Substitution Rate"}),e.jsxs(m,{className:"bg-orange-600 text-white",style:{fontSize:"10px"},children:[i(s.substitutionPatterns.rate),"%"]})]})}),s.substitutionPatterns.topSubstitutions.length>0&&e.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:[e.jsx("p",{className:"font-medium",style:{marginBottom:"4px"},children:"Top Substitutions:"}),s.substitutionPatterns.topSubstitutions.slice(0,3).map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between",style:{marginBottom:"2px"},children:[e.jsxs("span",{children:[t.from," â†’ ",t.to]}),e.jsxs("span",{className:"text-muted-foreground",children:[t.count," times"]})]},r))]})]}),e.jsxs("div",{className:"border-t",style:{paddingTop:"12px"},children:[e.jsx("h4",{className:"font-medium",style:{fontSize:"13px",marginBottom:"8px"},children:"Preference Signals"}),e.jsx("div",{className:"space-y-2",children:s.preferences.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",style:{fontSize:"11px"},children:t.signal}),e.jsxs("div",{className:"flex items-center",style:{gap:"8px"},children:[e.jsx(h,{value:t.strength,style:{width:"60px",height:"4px"}}),e.jsxs("span",{className:"font-medium",style:{fontSize:"11px",width:"32px",textAlign:"right"},children:[Math.round(t.strength),"%"]}),e.jsx("span",{className:`text-xs ${t.trend.startsWith("+")?"text-green-600":t.trend.startsWith("-")?"text-red-600":"text-gray-500"}`,style:{fontSize:"10px",width:"28px"},children:t.trend})]})]},t.signal))})]})]})]})}export{V as default};
