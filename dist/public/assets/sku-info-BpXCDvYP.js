import{j as s}from"./ui-vendor-DFluZlcK.js";import{u as p,C as a,b as c,c as d,a as l}from"./index-Qmr7BsAC.js";import{P as n,T as g,S as N,R as f}from"./icon-vendor-BiN7dS6p.js";import"./react-vendor-7S4FQL_3.js";import"./query-vendor-M5hTytP1.js";import"./util-vendor-B2rm_Apj.js";function K(){const{basketData:r,substitutionData:i,isLoading:m}=p();if(m)return s.jsxs(a,{className:"h-full",children:[s.jsx(c,{children:s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(n,{className:"h-5 w-5"}),"Product Mix & SKU Info"]})}),s.jsx(l,{children:s.jsxs("div",{className:"animate-pulse space-y-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})]});const x=r==null?void 0:r.reduce((e,t)=>(e[t.brand]=(e[t.brand]||0)+t.item_count,e),{}),o=Object.entries(x||{}).sort(([,e],[,t])=>t-e).slice(0,5),h=(r==null?void 0:r.reduce((e,t)=>e+t.item_count,0))/((r==null?void 0:r.length)||1),u=(r==null?void 0:r.reduce((e,t)=>e+t.total_value,0))/((r==null?void 0:r.length)||1);return s.jsxs(a,{className:"h-full",children:[s.jsx(c,{children:s.jsxs(d,{className:"flex items-center gap-2",children:[s.jsx(n,{className:"h-5 w-5"}),"Product Mix & SKU Info"]})}),s.jsxs(l,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[s.jsx(g,{className:"h-4 w-4"}),"Top SKUs"]}),s.jsx("div",{className:"space-y-2",children:o.map(([e,t],j)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[j+1,". ",e]}),s.jsxs("span",{className:"text-sm font-medium",children:[t," units"]})]},e))})]}),s.jsxs("div",{className:"pt-3 border-t",children:[s.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[s.jsx(N,{className:"h-4 w-4"}),"Basket Composition"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-muted/50 p-2 rounded",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Items"}),s.jsx("p",{className:"text-lg font-semibold",children:h.toFixed(1)})]}),s.jsxs("div",{className:"bg-muted/50 p-2 rounded",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Value"}),s.jsxs("p",{className:"text-lg font-semibold",children:["₱",u.toFixed(0)]})]})]})]}),s.jsxs("div",{className:"pt-3 border-t",children:[s.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-1",children:[s.jsx(f,{className:"h-4 w-4"}),"Substitution Patterns"]}),s.jsx("div",{className:"space-y-1",children:i==null?void 0:i.slice(0,3).map((e,t)=>s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.original," → ",e.substitute," (",e.frequency,"x)"]},t))})]})]})]})}export{K as default};
