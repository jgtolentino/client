import{j as e}from"./ui-vendor-DFluZlcK.js";import{r as p}from"./react-vendor-7S4FQL_3.js";import{u as m,S as n,C as r,a as l,b as c,c as d,B as o}from"./index-eY1K4Q0h.js";import{M as f,T as u,C as g,a as N,L as h}from"./map-vendor-Co1Oet-L.js";import{E as x,T as b,i as y}from"./icon-vendor-BiN7dS6p.js";import"./query-vendor-M5hTytP1.js";import"./util-vendor-B2rm_Apj.js";delete h.Icon.Default.prototype._getIconUrl;h.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function v(){const{locationData:t,isLoading:i}=m();return i?e.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-base font-semibold text-gray-700",children:"Transaction Volume"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Last 30 days"})]}),e.jsx(n,{className:"h-80 w-full rounded-lg"})]}):e.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-sm h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-base font-semibold text-gray-700",children:"Transaction Volume"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Last 30 days"})]}),e.jsx("div",{className:"flex-1 min-h-[300px] h-[320px] relative rounded-lg overflow-hidden",children:e.jsxs(f,{center:[12.8797,121.774],zoom:6,className:"h-full w-full",style:{background:"#f8fafc"},scrollWheelZoom:!1,children:[e.jsx(u,{attribution:'© <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),t==null?void 0:t.map(s=>e.jsx(g,{center:[s.coordinates[1],s.coordinates[0]],radius:Math.max(8,Math.sqrt(s.transactions)*.8),fillOpacity:.7,color:"#2563eb",fillColor:"#3b82f6",stroke:!0,weight:2,children:e.jsx(N,{direction:"top",offset:[0,-4],opacity:1,permanent:!1,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:s.location}),e.jsxs("div",{className:"text-sm",children:[s.transactions.toLocaleString()," transactions"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["₱",(s.revenue/1e6).toFixed(1),"M revenue"]})]})})},s.location))]})})]})}function U(){const[t,i]=p.useState("Density"),{locationData:s,isLoading:j}=m();return j?e.jsxs("div",{className:"space-y-6",children:[e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsx(n,{className:"h-96 w-full"})})}),e.jsx(r,{children:e.jsx(l,{className:"p-6",children:e.jsx(n,{className:"h-64 w-full"})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(v,{}),e.jsxs(r,{className:"shadow-sm border border-gray-200",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(d,{className:"text-lg font-semibold",children:"Location Performance"}),e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(x,{className:"w-5 h-5"})})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-gray-700 border-b pb-2",children:[e.jsx("span",{children:"Location"}),e.jsx("span",{children:"Transaction Volume"})]}),s==null?void 0:s.slice(0,7).map(a=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900",children:a.location})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:a.transactions}),e.jsx("div",{className:"text-xs text-gray-500",children:"transactions"})]})]},a.location))]})})]}),e.jsxs(r,{className:"shadow-sm border border-gray-200",children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(d,{className:"text-lg font-semibold",children:"Regional Performance"}),e.jsx(o,{variant:"ghost",size:"sm",children:e.jsx(x,{className:"w-5 h-5"})})]}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:s==null?void 0:s.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded cursor-pointer hover:bg-muted transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:a.location}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["₱",(a.revenue/1e6).toFixed(1),"M revenue"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium text-foreground",children:a.transactions}),e.jsxs("div",{className:"flex items-center gap-1",children:[a.change>=0?e.jsx(b,{className:"w-3 h-3 text-green-600"}):e.jsx(y,{className:"w-3 h-3 text-red-600"}),e.jsxs("p",{className:`text-xs ${a.change>=0?"text-green-600":"text-red-600"}`,children:[a.change>=0?"+":"",a.change.toFixed(1),"%"]})]})]})]},a.location))})})]})]})}export{U as default};
